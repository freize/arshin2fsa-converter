<!DOCTYPE html>
<html lang="ru">
<head>
    <!-- Теги фавикона -->
    <!-- Standard favicon -->
    <link rel="icon" type="image/x-icon" href="/favicons/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="128x128" href="/favicons/favicon-128x128.png">

    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">

    <!-- Android Chrome Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="/favicons/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/favicons/android-chrome-512x512.png">

    <!-- Microsoft Tiles -->
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/favicons/android-chrome-192x192.png">
    <meta name="msapplication-config" content="/favicons/browserconfig.xml">

    <!-- Web App Manifest -->
    <link rel="manifest" href="/favicons/site.webmanifest">
    <!-- Конец тегов фавикона -->
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Конвертер CSV в JSON</title>
    <!-- Локальный Tailwind CSS (без CDN) -->
    <style>
        /*! tailwindcss v3.4.1 | MIT License | https://tailwindcss.com */
        *,
        ::before,
        ::after {
            box-sizing: border-box;
            border-width: 0;
            border-style: solid;
            border-color: #e5e7eb;
        }
        ::before,
        ::after {
            --tw-content: '';
        }
        html,
        :host {
            line-height: 1.5;
            -webkit-text-size-adjust: 100%;
            -moz-tab-size: 4;
            tab-size: 4;
            font-family: 'Inter', sans-serif;
            font-feature-settings: normal;
            font-variation-settings: normal;
            -webkit-tap-highlight-color: transparent;
        }
        body {
            margin: 0;
            line-height: inherit;
        }
        hr {
            height: 0;
            color: inherit;
            border-top-width: 1px;
        }
        abbr:where([title]) {
            text-decoration: underline dotted;
        }
        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-size: inherit;
            font-weight: inherit;
        }
        a {
            color: inherit;
            text-decoration: inherit;
        }
        b,
        strong {
            font-weight: bolder;
        }
        code,
        kbd,
        samp,
        pre {
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-feature-settings: normal;
            font-variation-settings: normal;
            font-size: 1em;
        }
        small {
            font-size: 80%;
        }
        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative;
            vertical-align: baseline;
        }
        sub {
            bottom: -0.25em;
        }
        sup {
            top: -0.5em;
        }
        table {
            text-indent: 0;
            border-color: inherit;
            border-collapse: collapse;
        }
        button,
        input,
        optgroup,
        select,
        textarea {
            font-family: inherit;
            font-feature-settings: inherit;
            font-variation-settings: inherit;
            font-size: 100%;
            font-weight: inherit;
            line-height: inherit;
            color: inherit;
            margin: 0;
            padding: 0;
        }
        button,
        select {
            text-transform: none;
        }
        button,
        [type='button'],
        [type='reset'],
        [type='submit'] {
            -webkit-appearance: button;
            background-color: transparent;
            background-image: none;
        }
        :-moz-focusring {
            outline: auto;
        }
        :-moz-ui-invalid {
            box-shadow: none;
        }
        progress {
            vertical-align: baseline;
        }
        ::-webkit-inner-spin-button,
        ::-webkit-outer-spin-button {
            height: auto;
        }
        [type='search'] {
            -webkit-appearance: textfield;
            outline-offset: -2px;
        }
        ::-webkit-search-decoration {
            -webkit-appearance: none;
        }
        ::-webkit-file-upload-button {
            -webkit-appearance: button;
            font: inherit;
        }
        summary {
            display: list-item;
        }
        blockquote,
        dl,
        dd,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        hr,
        figure,
        p,
        pre {
            margin: 0;
        }
        fieldset {
            margin: 0;
            padding: 0;
        }
        legend {
            padding: 0;
        }
        ol,
        ul,
        menu {
            list-style: none;
            margin: 0;
            padding: 0;
        }
        dialog {
            padding: 0;
        }
        textarea {
            resize: vertical;
        }
        input::placeholder,
        textarea::placeholder {
            opacity: 1;
            color: #9ca3af;
        }
        button,
        [role="button"] {
            cursor: pointer;
        }
        :disabled {
            cursor: default;
        }
        img,
        svg,
        video,
        canvas,
        audio,
        iframe,
        embed,
        object {
            display: block;
            vertical-align: middle;
        }
        img,
        video {
            max-width: 100%;
            height: auto;
        }
        [hidden] {
            display: none;
        }
        *, ::before, ::after {
            --tw-border-spacing-x: 0;
            --tw-border-spacing-y: 0;
            --tw-translate-x: 0;
            --tw-translate-y: 0;
            --tw-rotate: 0;
            --tw-skew-x: 0;
            --tw-skew-y: 0;
            --tw-scale-x: 1;
            --tw-scale-y: 1;
            --tw-pan-x:  ;
            --tw-pan-y:  ;
            --tw-pinch-zoom:  ;
            --tw-scroll-snap-strictness: proximity;
            --tw-gradient-from-position:  ;
            --tw-gradient-via-position:  ;
            --tw-gradient-to-position:  ;
            --tw-ordinal:  ;
            --tw-slashed-zero:  ;
            --tw-numeric-figure:  ;
            --tw-numeric-spacing:  ;
            --tw-numeric-fraction:  ;
            --tw-ring-inset:  ;
            --tw-ring-offset-width: 0px;
            --tw-ring-offset-color: #fff;
            --tw-ring-color: rgb(59 130 246 / 0.5);
            --tw-ring-offset-shadow: 0 0 #0000;
            --tw-ring-shadow: 0 0 #0000;
            --tw-shadow: 0 0 #0000;
            --tw-shadow-colored: 0 0 #0000;
            --tw-blur:  ;
            --tw-brightness:  ;
            --tw-contrast:  ;
            --tw-grayscale:  ;
            --tw-hue-rotate:  ;
            --tw-invert:  ;
            --tw-saturate:  ;
            --tw-sepia:  ;
            --tw-drop-shadow:  ;
            --tw-backdrop-blur:  ;
            --tw-backdrop-brightness:  ;
            --tw-backdrop-contrast:  ;
            --tw-backdrop-grayscale:  ;
            --tw-backdrop-hue-rotate:  ;
            --tw-backdrop-invert:  ;
            --tw-backdrop-opacity:  ;
            --tw-backdrop-saturate:  ;
            --tw-backdrop-sepia:  ;
        }
        ::backdrop {
            --tw-border-spacing-x: 0;
            --tw-border-spacing-y: 0;
            --tw-translate-x: 0;
            --tw-translate-y: 0;
            --tw-rotate: 0;
            --tw-skew-x: 0;
            --tw-skew-y: 0;
            --tw-scale-x: 1;
            --tw-scale-y: 1;
            --tw-pan-x:  ;
            --tw-pan-y:  ;
            --tw-pinch-zoom:  ;
            --tw-scroll-snap-strictness: proximity;
            --tw-gradient-from-position:  ;
            --tw-gradient-via-position:  ;
            --tw-gradient-to-position:  ;
            --tw-ordinal:  ;
            --tw-slashed-zero:  ;
            --tw-numeric-figure:  ;
            --tw-numeric-spacing:  ;
            --tw-numeric-fraction:  ;
            --tw-ring-inset:  ;
            --tw-ring-offset-width: 0px;
            --tw-ring-offset-color: #fff;
            --tw-ring-color: rgb(59 130 246 / 0.5);
            --tw-ring-offset-shadow: 0 0 #0000;
            --tw-ring-shadow: 0 0 #0000;
            --tw-shadow: 0 0 #0000;
            --tw-shadow-colored: 0 0 #0000;
            --tw-blur:  ;
            --tw-brightness:  ;
            --tw-contrast:  ;
            --tw-grayscale:  ;
            --tw-hue-rotate:  ;
            --tw-invert:  ;
            --tw-saturate:  ;
            --tw-sepia:  ;
            --tw-drop-shadow:  ;
            --tw-backdrop-blur:  ;
            --tw-backdrop-brightness:  ;
            --tw-backdrop-contrast:  ;
            --tw-backdrop-grayscale:  ;
            --tw-backdrop-hue-rotate:  ;
            --tw-backdrop-invert:  ;
            --tw-backdrop-opacity:  ;
            --tw-backdrop-saturate:  ;
            --tw-backdrop-sepia:  ;
        }
        .container {
            width: 100%;
        }
        @media (min-width: 640px) {
            .container {
                max-width: 640px;
            }
        }
        @media (min-width: 768px) {
            .container {
                max-width: 768px;
            }
        }
        @media (min-width: 1024px) {
            .container {
                max-width: 1024px;
            }
        }
        @media (min-width: 1280px) {
            .container {
                max-width: 1280px;
            }
        }
        @media (min-width: 1536px) {
            .container {
                max-width: 1536px;
            }
        }
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
        .pointer-events-none {
            pointer-events: none;
        }
        .visible {
            visibility: visible;
        }
        .fixed {
            position: fixed;
        }
        .absolute {
            position: absolute;
        }
        .relative {
            position: relative;
        }
        .sticky {
            position: sticky;
        }
        .inset-0 {
            inset: 0px;
        }
        .top-0 {
            top: 0px;
        }
        .z-10 {
            z-index: 10;
        }
        .m-0 {
            margin: 0px;
        }
        .mx-auto {
            margin-left: auto;
            margin-right: auto;
        }
        .my-0 {
            margin-top: 0px;
            margin-bottom: 0px;
        }
        .my-2 {
            margin-top: 0.5rem;
            margin-bottom: 0.5rem;
        }
        .my-4 {
            margin-top: 1rem;
            margin-bottom: 1rem;
        }
        .mb-1 {
            margin-bottom: 0.25rem;
        }
        .mb-2 {
            margin-bottom: 0.5rem;
        }
        .mb-3 {
            margin-bottom: 0.75rem;
        }
        .mb-4 {
            margin-bottom: 1rem;
        }
        .mb-6 {
            margin-bottom: 1.5rem;
        }
        .mb-8 {
            margin-bottom: 2rem;
        }
        .ml-2 {
            margin-left: 0.5rem;
        }
        .ml-3 {
            margin-left: 0.75rem;
        }
        .ml-4 {
            margin-left: 1rem;
        }
        .mr-1 {
            margin-right: 0.25rem;
        }
        .mr-2 {
            margin-right: 0.5rem;
        }
        .mt-1 {
            margin-top: 0.25rem;
        }
        .mt-2 {
            margin-top: 0.5rem;
        }
        .mt-3 {
            margin-top: 0.75rem;
        }
        .mt-4 {
            margin-top: 1rem;
        }
        .mt-6 {
            margin-top: 1.5rem;
        }
        .mt-8 {
            margin-top: 2rem;
        }
        .mt-10 {
            margin-top: 2.5rem;
        }
        .-mt-2 {
            margin-top: -0.5rem;
        }
        .block {
            display: block;
        }
        .inline-block {
            display: inline-block;
        }
        .flex {
            display: flex;
        }
        .inline-flex {
            display: inline-flex;
        }
        .table {
            display: table;
        }
        .grid {
            display: grid;
        }
        .hidden {
            display: none;
        }
        .h-3 {
            height: 0.75rem;
        }
        .h-4 {
            height: 1rem;
        }
        .h-5 {
            height: 1.25rem;
        }
        .h-6 {
            height: 1.5rem;
        }
        .h-8 {
            height: 2rem;
        }
        .h-12 {
            height: 3rem;
        }
        .h-20 {
            height: 5rem;
        }
        .h-2\.5 {
            height: 0.625rem;
        }
        .min-h-\[50px\] {
            min-height: 50px;
        }
        .min-h-screen {
            min-height: 100vh;
        }
        .w-3 {
            width: 0.75rem;
        }
        .w-4 {
            width: 1rem;
        }
        .w-5 {
            width: 1.25rem;
        }
        .w-6 {
            width: 1.5rem;
        }
        .w-8 {
            width: 2rem;
        }
        .w-12 {
            width: 3rem;
        }
        .w-20 {
            width: 5rem;
        }
        .w-full {
            width: 100%;
        }
        .w-1\/2 {
            width: 50%;
        }
        .min-w-0 {
            min-width: 0px;
        }
        .min-w-full {
            min-width: 100%;
        }
        .max-w-2xl {
            max-width: 42rem;
        }
        .max-w-4xl {
            max-width: 56rem;
        }
        .flex-1 {
            flex: 1 1 0%;
        }
        .flex-shrink-0 {
            flex-shrink: 0;
        }
        .flex-grow {
            flex-grow: 1;
        }
        .cursor-pointer {
            cursor: pointer;
        }
        .list-none {
            list-style-type: none;
        }
        .select-none {
            user-select: none;
        }
        .resize {
            resize: both;
        }
        .grid-cols-1 {
            grid-template-columns: repeat(1, minmax(0, 1fr));
        }
        .flex-col {
            flex-direction: column;
        }
        .flex-wrap {
            flex-wrap: wrap;
        }
        .items-start {
            align-items: flex-start;
        }
        .items-center {
            align-items: center;
        }
        .items-stretch {
            align-items: stretch;
        }
        .justify-end {
            justify-content: flex-end;
        }
        .justify-center {
            justify-content: center;
        }
        .justify-between {
            justify-content: space-between;
        }
        .gap-2 {
            gap: 0.5rem;
        }
        .gap-3 {
            gap: 0.75rem;
        }
        .gap-4 {
            gap: 1rem;
        }
        .space-x-1 > :not([hidden]) ~ :not([hidden]) {
            --tw-space-x-reverse: 0;
            margin-right: calc(0.25rem * var(--tw-space-x-reverse));
            margin-left: calc(0.25rem * calc(1 - var(--tw-space-x-reverse)));
        }
        .space-x-2 > :not([hidden]) ~ :not([hidden]) {
            --tw-space-x-reverse: 0;
            margin-right: calc(0.5rem * var(--tw-space-x-reverse));
            margin-left: calc(0.5rem * calc(1 - var(--tw-space-x-reverse)));
        }
        .space-y-1 > :not([hidden]) ~ :not([hidden]) {
            --tw-space-y-reverse: 0;
            margin-top: calc(0.25rem * calc(1 - var(--tw-space-y-reverse)));
            margin-bottom: calc(0.25rem * var(--tw-space-y-reverse));
        }
        .space-y-2 > :not([hidden]) ~ :not([hidden]) {
            --tw-space-y-reverse: 0;
            margin-top: calc(0.5rem * calc(1 - var(--tw-space-y-reverse)));
            margin-bottom: calc(0.5rem * var(--tw-space-y-reverse));
        }
        .space-y-3 > :not([hidden]) ~ :not([hidden]) {
            --tw-space-y-reverse: 0;
            margin-top: calc(0.75rem * calc(1 - var(--tw-space-y-reverse)));
            margin-bottom: calc(0.75rem * var(--tw-space-y-reverse));
        }
        .space-y-4 > :not([hidden]) ~ :not([hidden]) {
            --tw-space-y-reverse: 0;
            margin-top: calc(1rem * calc(1 - var(--tw-space-y-reverse)));
            margin-bottom: calc(1rem * var(--tw-space-y-reverse));
        }
        .space-y-6 > :not([hidden]) ~ :not([hidden]) {
            --tw-space-y-reverse: 0;
            margin-top: calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));
            margin-bottom: calc(1.5rem * var(--tw-space-y-reverse));
        }
        .divide-y > :not([hidden]) ~ :not([hidden]) {
            --tw-divide-y-reverse: 0;
            border-top-width: calc(1px * calc(1 - var(--tw-divide-y-reverse)));
            border-bottom-width: calc(1px * var(--tw-divide-y-reverse));
        }
        .divide-gray-100 > :not([hidden]) ~ :not([hidden]) {
            --tw-divide-opacity: 1;
            border-color: rgb(243 244 246 / var(--tw-divide-opacity));
        }
        .divide-gray-200 > :not([hidden]) ~ :not([hidden]) {
            --tw-divide-opacity: 1;
            border-color: rgb(229 231 235 / var(--tw-divide-opacity));
        }
        .self-center {
            align-self: center;
        }
        .overflow-auto {
            overflow: auto;
        }
        .overflow-hidden {
            overflow: hidden;
        }
        .overflow-x-auto {
            overflow-x: auto;
        }
        .overflow-y-auto {
            overflow-y: auto;
        }
        .overflow-x-hidden {
            overflow-x: hidden;
        }
        .truncate {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        .whitespace-nowrap {
            white-space: nowrap;
        }
        .break-words {
            overflow-wrap: break-word;
        }
        .rounded {
            border-radius: 0.25rem;
        }
        .rounded-full {
            border-radius: 9999px;
        }
        .rounded-lg {
            border-radius: 0.5rem;
        }
        .rounded-md {
            border-radius: 0.375rem;
        }
        .rounded-xl {
            border-radius: 0.75rem;
        }
        .border {
            border-width: 1px;
        }
        .border-0 {
            border-width: 0px;
        }
        .border-2 {
            border-width: 2px;
        }
        .border-y {
            border-top-width: 1px;
            border-bottom-width: 1px;
        }
        .border-b {
            border-bottom-width: 1px;
        }
        .border-l-4 {
            border-left-width: 4px;
        }
        .border-t {
            border-top-width: 1px;
        }
        .border-t-4 {
            border-top-width: 4px;
        }
        .border-solid {
            border-style: solid;
        }
        .border-dashed {
            border-style: dashed;
        }
        .border-accent-sky {
            border-color: #0ea5e9;
        }
        .border-blue-600 {
            --tw-border-opacity: 1;
            border-color: rgb(37 99 235 / var(--tw-border-opacity));
        }
        .border-emerald-500 {
            --tw-border-opacity: 1;
            border-color: rgb(16 185 129 / var(--tw-border-opacity));
        }
        .border-gray-200 {
            --tw-border-opacity: 1;
            border-color: rgb(229 231 235 / var(--tw-border-opacity));
        }
        .border-gray-300 {
            --tw-border-opacity: 1;
            border-color: rgb(209 213 219 / var(--tw-border-opacity));
        }
        .border-gray-400 {
            --tw-border-opacity: 1;
            border-color: rgb(156 163 175 / var(--tw-border-opacity));
        }
        .border-green-200 {
            --tw-border-opacity: 1;
            border-color: rgb(187 247 208 / var(--tw-border-opacity));
        }
        .border-green-300 {
            --tw-border-opacity: 1;
            border-color: rgb(134 239 172 / var(--tw-border-opacity));
        }
        .border-orange-200 {
            --tw-border-opacity: 1;
            border-color: rgb(254 215 170 / var(--tw-border-opacity));
        }
        .border-orange-300 {
            --tw-border-opacity: 1;
            border-color: rgb(253 186 116 / var(--tw-border-opacity));
        }
        .border-purple-200 {
            --tw-border-opacity: 1;
            border-color: rgb(233 213 255 / var(--tw-border-opacity));
        }
        .border-purple-300 {
            --tw-border-opacity: 1;
            border-color: rgb(196 181 253 / var(--tw-border-opacity));
        }
        .border-red-200 {
            --tw-border-opacity: 1;
            border-color: rgb(254 202 202 / var(--tw-border-opacity));
        }
        .border-red-300 {
            --tw-border-opacity: 1;
            border-color: rgb(252 165 165 / var(--tw-border-opacity));
        }
        .border-red-500 {
            --tw-border-opacity: 1;
            border-color: rgb(239 68 68 / var(--tw-border-opacity));
        }
        .border-sky-200 {
            --tw-border-opacity: 1;
            border-color: rgb(186 230 253 / var(--tw-border-opacity));
        }
        .border-yellow-300 {
            --tw-border-opacity: 1;
            border-color: rgb(253 224 71 / var(--tw-border-opacity));
        }
        .bg-accent-emerald {
            background-color: #10b981;
        }
        .bg-accent-sky {
            background-color: #0ea5e9;
        }
        .bg-blue-100 {
            --tw-bg-opacity: 1;
            background-color: rgb(219 234 254 / var(--tw-bg-opacity));
        }
        .bg-blue-600 {
            --tw-bg-opacity: 1;
            background-color: rgb(37 99 235 / var(--tw-bg-opacity));
        }
        .bg-emerald-50 {
            --tw-bg-opacity: 1;
            background-color: rgb(236 253 245 / var(--tw-bg-opacity));
        }
        .bg-emerald-500 {
            --tw-bg-opacity: 1;
            background-color: rgb(16 185 129 / var(--tw-bg-opacity));
        }
        .bg-gray-50 {
            --tw-bg-opacity: 1;
            background-color: rgb(249 250 251 / var(--tw-bg-opacity));
        }
        .bg-gray-100 {
            --tw-bg-opacity: 1;
            background-color: rgb(243 244 246 / var(--tw-bg-opacity));
        }
        .bg-gray-200 {
            --tw-bg-opacity: 1;
            background-color: rgb(229 231 235 / var(--tw-bg-opacity));
        }
        .bg-gray-300 {
            --tw-bg-opacity: 1;
            background-color: rgb(209 213 219 / var(--tw-bg-opacity));
        }
        .bg-gray-400 {
            --tw-bg-opacity: 1;
            background-color: rgb(156 163 175 / var(--tw-bg-opacity));
        }
        .bg-green-50 {
            --tw-bg-opacity: 1;
            background-color: rgb(240 253 244 / var(--tw-bg-opacity));
        }
        .bg-green-600 {
            --tw-bg-opacity: 1;
            background-color: rgb(22 163 74 / var(--tw-bg-opacity));
        }
        .bg-orange-50 {
            --tw-bg-opacity: 1;
            background-color: rgb(255 247 237 / var(--tw-bg-opacity));
        }
        .bg-orange-500 {
            --tw-bg-opacity: 1;
            background-color: rgb(249 115 22 / var(--tw-bg-opacity));
        }
        .bg-orange-600 {
            --tw-bg-opacity: 1;
            background-color: rgb(234 88 12 / var(--tw-bg-opacity));
        }
        .bg-purple-50 {
            --tw-bg-opacity: 1;
            background-color: rgb(250 245 255 / var(--tw-bg-opacity));
        }
        .bg-purple-500 {
            --tw-bg-opacity: 1;
            background-color: rgb(168 85 247 / var(--tw-bg-opacity));
        }
        .bg-red-50 {
            --tw-bg-opacity: 1;
            background-color: rgb(254 242 242 / var(--tw-bg-opacity));
        }
        .bg-red-500 {
            --tw-bg-opacity: 1;
            background-color: rgb(239 68 68 / var(--tw-bg-opacity));
        }
        .bg-sky-50 {
            --tw-bg-opacity: 1;
            background-color: rgb(240 249 255 / var(--tw-bg-opacity));
        }
        .bg-sky-100 {
            --tw-bg-opacity: 1;
            background-color: rgb(224 242 254 / var(--tw-bg-opacity));
        }
        .bg-sky-200 {
            --tw-bg-opacity: 1;
            background-color: rgb(186 230 253 / var(--tw-bg-opacity));
        }
        .bg-white {
            --tw-bg-opacity: 1;
            background-color: rgb(255 255 255 / var(--tw-bg-opacity));
        }
        .bg-yellow-50 {
            --tw-bg-opacity: 1;
            background-color: rgb(254 252 232 / var(--tw-bg-opacity));
        }
        .bg-yellow-600 {
            --tw-bg-opacity: 1;
            background-color: rgb(202 138 4 / var(--tw-bg-opacity));
        }
        .bg-gradient-to-r {
            background-image: linear-gradient(to right, var(--tw-gradient-stops));
        }
        .from-blue-600 {
            --tw-gradient-from: #2563eb var(--tw-gradient-from-position);
            --tw-gradient-to: rgb(37 99 235 / 0) var(--tw-gradient-to-position);
            --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);
        }
        .to-blue-700 {
            --tw-gradient-to: #1d4ed8 var(--tw-gradient-to-position);
        }
        .bg-opacity-75 {
            --tw-bg-opacity: 0.75;
        }
        .object-cover {
            object-fit: cover;
        }
        .p-1 {
            padding: 0.25rem;
        }
        .p-2 {
            padding: 0.5rem;
        }
        .p-3 {
            padding: 0.75rem;
        }
        .p-4 {
            padding: 1rem;
        }
        .p-6 {
            padding: 1.5rem;
        }
        .p-8 {
            padding: 2rem;
        }
        .px-1 {
            padding-left: 0.25rem;
            padding-right: 0.25rem;
        }
        .px-3 {
            padding-left: 0.75rem;
            padding-right: 0.75rem;
        }
        .px-4 {
            padding-left: 1rem;
            padding-right: 1rem;
        }
        .px-6 {
            padding-left: 1.5rem;
            padding-right: 1.5rem;
        }
        .py-0 {
            padding-top: 0px;
            padding-bottom: 0px;
        }
        .py-0\.5 {
            padding-top: 0.125rem;
            padding-bottom: 0.125rem;
        }
        .py-1 {
            padding-top: 0.25rem;
            padding-bottom: 0.25rem;
        }
        .py-2 {
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
        }
        .py-3 {
            padding-top: 0.75rem;
            padding-bottom: 0.75rem;
        }
        .py-4 {
            padding-top: 1rem;
            padding-bottom: 1rem;
        }
        .pb-1 {
            padding-bottom: 0.25rem;
        }
        .pb-2 {
            padding-bottom: 0.5rem;
        }
        .pb-4 {
            padding-bottom: 1rem;
        }
        .pl-3 {
            padding-left: 0.75rem;
        }
        .pr-2 {
            padding-right: 0.5rem;
        }
        .pt-1 {
            padding-top: 0.25rem;
        }
        .pt-2 {
            padding-top: 0.5rem;
        }
        .pt-4 {
            padding-top: 1rem;
        }
        .pt-6 {
            padding-top: 1.5rem;
        }
        .text-left {
            text-align: left;
        }
        .text-center {
            text-align: center;
        }
        .text-right {
            text-align: right;
        }
        .align-middle {
            vertical-align: middle;
        }
        .font-mono {
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        }
        .text-2xl {
            font-size: 1.5rem;
            line-height: 2rem;
        }
        .text-3xl {
            font-size: 1.875rem;
            line-height: 2.25rem;
        }
        .text-base {
            font-size: 1rem;
            line-height: 1.5rem;
        }
        .text-lg {
            font-size: 1.125rem;
            line-height: 1.75rem;
        }
        .text-sm {
            font-size: 0.875rem;
            line-height: 1.25rem;
        }
        .text-xl {
            font-size: 1.25rem;
            line-height: 1.75rem;
        }
        .text-xs {
            font-size: 0.75rem;
            line-height: 1rem;
        }
        .font-bold {
            font-weight: 700;
        }
        .font-extrabold {
            font-weight: 800;
        }
        .font-medium {
            font-weight: 500;
        }
        .font-normal {
            font-weight: 400;
        }
        .font-semibold {
            font-weight: 600;
        }
        .uppercase {
            text-transform: uppercase;
        }
        .italic {
            font-style: italic;
        }
        .leading-5 {
            line-height: 1.25rem;
        }
        .leading-6 {
            line-height: 1.5rem;
        }
        .leading-snug {
            line-height: 1.375;
        }
        .tracking-wider {
            letter-spacing: 0.05em;
        }
        .text-accent-emerald {
            color: #10b981;
        }
        .text-accent-sky {
            color: #0ea5e9;
        }
        .text-blue-600 {
            --tw-text-opacity: 1;
            color: rgb(37 99 235 / var(--tw-text-opacity));
        }
        .text-blue-800 {
            --tw-text-opacity: 1;
            color: rgb(30 64 175 / var(--tw-text-opacity));
        }
        .text-emerald-600 {
            --tw-text-opacity: 1;
            color: rgb(5 150 105 / var(--tw-text-opacity));
        }
        .text-gray-400 {
            --tw-text-opacity: 1;
            color: rgb(156 163 175 / var(--tw-text-opacity));
        }
        .text-gray-500 {
            --tw-text-opacity: 1;
            color: rgb(107 114 128 / var(--tw-text-opacity));
        }
        .text-gray-600 {
            --tw-text-opacity: 1;
            color: rgb(75 85 99 / var(--tw-text-opacity));
        }
        .text-gray-700 {
            --tw-text-opacity: 1;
            color: rgb(55 65 81 / var(--tw-text-opacity));
        }
        .text-gray-800 {
            --tw-text-opacity: 1;
            color: rgb(31 41 55 / var(--tw-text-opacity));
        }
        .text-gray-900 {
            --tw-text-opacity: 1;
            color: rgb(17 24 39 / var(--tw-text-opacity));
        }
        .text-green-600 {
            --tw-text-opacity: 1;
            color: rgb(22 163 74 / var(--tw-text-opacity));
        }
        .text-green-800 {
            --tw-text-opacity: 1;
            color: rgb(22 101 52 / var(--tw-text-opacity));
        }
        .text-orange-500 {
            --tw-text-opacity: 1;
            color: rgb(249 115 22 / var(--tw-text-opacity));
        }
        .text-orange-600 {
            --tw-text-opacity: 1;
            color: rgb(234 88 12 / var(--tw-text-opacity));
        }
        .text-orange-700 {
            --tw-text-opacity: 1;
            color: rgb(194 65 12 / var(--tw-text-opacity));
        }
        .text-orange-800 {
            --tw-text-opacity: 1;
            color: rgb(154 52 18 / var(--tw-text-opacity));
        }
        .text-purple-500 {
            --tw-text-opacity: 1;
            color: rgb(168 85 247 / var(--tw-text-opacity));
        }
        .text-purple-600 {
            --tw-text-opacity: 1;
            color: rgb(147 51 234 / var(--tw-text-opacity));
        }
        .text-purple-700 {
            --tw-text-opacity: 1;
            color: rgb(126 34 206 / var(--tw-text-opacity));
        }
        .text-purple-800 {
            --tw-text-opacity: 1;
            color: rgb(107 33 168 / var(--tw-text-opacity));
        }
        .text-red-500 {
            --tw-text-opacity: 1;
            color: rgb(239 68 68 / var(--tw-text-opacity));
        }
        .text-red-600 {
            --tw-text-opacity: 1;
            color: rgb(220 38 38 / var(--tw-text-opacity));
        }
        .text-red-700 {
            --tw-text-opacity: 1;
            color: rgb(185 28 28 / var(--tw-text-opacity));
        }
        .text-red-800 {
            --tw-text-opacity: 1;
            color: rgb(153 27 27 / var(--tw-text-opacity));
        }
        .text-sky-600 {
            --tw-text-opacity: 1;
            color: rgb(2 132 199 / var(--tw-text-opacity));
        }
        .text-sky-700 {
            --tw-text-opacity: 1;
            color: rgb(3 105 161 / var(--tw-text-opacity));
        }
        .text-sky-800 {
            --tw-text-opacity: 1;
            color: rgb(7 89 133 / var(--tw-text-opacity));
        }
        .text-sky-900 {
            --tw-text-opacity: 1;
            color: rgb(12 74 110 / var(--tw-text-opacity));
        }
        .text-white {
            --tw-text-opacity: 1;
            color: rgb(255 255 255 / var(--tw-text-opacity));
        }
        .text-yellow-600 {
            --tw-text-opacity: 1;
            color: rgb(202 138 4 / var(--tw-text-opacity));
        }
        .text-yellow-800 {
            --tw-text-opacity: 1;
            color: rgb(133 77 14 / var(--tw-text-opacity));
        }
        .underline {
            text-decoration-line: underline;
        }
        .antialiased {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .opacity-0 {
            opacity: 0;
        }
        .opacity-25 {
            opacity: 0.25;
        }
        .opacity-75 {
            opacity: 0.75;
        }
        .opacity-100 {
            opacity: 1;
        }
        .shadow {
            --tw-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
            --tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);
        }
        .shadow-inner {
            --tw-shadow: inset 0 2px 4px 0 rgb(0 0 0 / 0.05);
            --tw-shadow-colored: inset 0 2px 4px 0 var(--tw-shadow-color);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);
        }
        .shadow-lg {
            --tw-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);
        }
        .shadow-md {
            --tw-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);
        }
        .shadow-sm {
            --tw-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);
        }
        .shadow-xl {
            --tw-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
            --tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);
        }
        .shadow-2xl {
            --tw-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25);
            --tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);
        }
        .outline-none {
            outline: 2px solid transparent;
            outline-offset: 2px;
        }
        .ring-1 {
            --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);
            --tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);
            box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);
        }
        .ring-black {
            --tw-ring-opacity: 1;
            --tw-ring-color: rgb(0 0 0 / var(--tw-ring-opacity));
        }
        .ring-opacity-5 {
            --tw-ring-opacity: 0.05;
        }
        .blur {
            --tw-blur: blur(8px);
            filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);
        }
        .filter {
            filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);
        }
        .transition {
            transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 150ms;
        }
        .transition-all {
            transition-property: all;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 150ms;
        }
        .transition-colors {
            transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 150ms;
        }
        .transition-opacity {
            transition-property: opacity;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 150ms;
        }
        .transition-transform {
            transition-property: transform;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 150ms;
        }
        .duration-100 {
            transition-duration: 100ms;
        }
        .duration-150 {
            transition-duration: 150ms;
        }
        .duration-200 {
            transition-duration: 200ms;
        }
        .duration-300 {
            transition-duration: 300ms;
        }
        .ease-in-out {
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        }
        .ease-linear {
            transition-timing-function: linear;
        }
        .line-clamp-2 {
            overflow: hidden;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 2;
        }

        /* Кастомные стили для файлового инпута */
        .file\:mr-4::file-selector-button {
            margin-right: 1rem;
        }
        .file\:py-3::file-selector-button {
            padding-top: 0.75rem;
            padding-bottom: 0.75rem;
        }
        .file\:px-6::file-selector-button {
            padding-left: 1.5rem;
            padding-right: 1.5rem;
        }
        .file\:rounded-xl::file-selector-button {
            border-radius: 0.75rem;
        }
        .file\:border-0::file-selector-button {
            border-width: 0px;
        }
        .file\:text-base::file-selector-button {
            font-size: 1rem;
            line-height: 1.5rem;
        }
        .file\:font-bold::file-selector-button {
            font-weight: 700;
        }
        .file\:bg-blue-100::file-selector-button {
            --tw-bg-opacity: 1;
            background-color: rgb(219 234 254 / var(--tw-bg-opacity));
        }
        .file\:text-blue-800::file-selector-button {
            --tw-text-opacity: 1;
            color: rgb(30 64 175 / var(--tw-text-opacity));
        }
        .hover\:file\:bg-blue-200::file-selector-button:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(191 219 254 / var(--tw-bg-opacity));
        }

        /* Анимации */
        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
        .animate-spin {
            animation: spin 1s linear infinite;
        }

        /* Group open для details */
        .group-open\:rotate-180[open] summary svg {
            transform: rotate(180deg);
        }

        /* Hover эффекты */
        .hover\:scale-\[1\.01\]:hover {
            transform: scale(1.01);
        }
        .hover\:bg-blue-200:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(191 219 254 / var(--tw-bg-opacity));
        }
        .hover\:bg-emerald-600:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(5 150 105 / var(--tw-bg-opacity));
        }
        .hover\:bg-gray-400:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(156 163 175 / var(--tw-bg-opacity));
        }
        .hover\:bg-gray-50:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(249 250 251 / var(--tw-bg-opacity));
        }
        .hover\:bg-gray-500:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(107 114 128 / var(--tw-bg-opacity));
        }
        .hover\:bg-green-700:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(21 128 61 / var(--tw-bg-opacity));
        }
        .hover\:bg-orange-600:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(234 88 12 / var(--tw-bg-opacity));
        }
        .hover\:bg-purple-600:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(147 51 234 / var(--tw-bg-opacity));
        }
        .hover\:bg-red-600:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(220 38 38 / var(--tw-bg-opacity));
        }
        .hover\:bg-yellow-700:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(161 98 7 / var(--tw-bg-opacity));
        }
        .hover\:from-blue-700:hover {
            --tw-gradient-from: #1d4ed8 var(--tw-gradient-from-position);
            --tw-gradient-to: rgb(29 78 216 / 0) var(--tw-gradient-to-position);
            --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);
        }
        .hover\:to-blue-800:hover {
            --tw-gradient-to: #1e40af var(--tw-gradient-to-position);
        }
        .hover\:text-blue-600:hover {
            --tw-text-opacity: 1;
            color: rgb(37 99 235 / var(--tw-text-opacity));
        }
        .hover\:text-red-900:hover {
            --tw-text-opacity: 1;
            color: rgb(127 29 29 / var(--tw-text-opacity));
        }
        .focus\:border-blue-500:focus {
            --tw-border-opacity: 1;
            border-color: rgb(59 130 246 / var(--tw-border-opacity));
        }
        .focus\:border-emerald-500:focus {
            --tw-border-opacity: 1;
            border-color: rgb(16 185 129 / var(--tw-border-opacity));
        }
        .focus\:border-green-500:focus {
            --tw-border-opacity: 1;
            border-color: rgb(34 197 94 / var(--tw-border-opacity));
        }
        .focus\:border-yellow-500:focus {
            --tw-border-opacity: 1;
            border-color: rgb(234 179 8 / var(--tw-border-opacity));
        }
        .focus\:outline-none:focus {
            outline: 2px solid transparent;
            outline-offset: 2px;
        }
        .focus\:ring-2:focus {
            --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);
            --tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);
            box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);
        }
        .focus\:ring-4:focus {
            --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);
            --tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);
            box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);
        }
        .focus\:ring-blue-500:focus {
            --tw-ring-opacity: 1;
            --tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity));
        }
        .focus\:ring-blue-500\/50:focus {
            --tw-ring-color: rgb(59 130 246 / 0.5);
        }
        .focus\:ring-green-500:focus {
            --tw-ring-opacity: 1;
            --tw-ring-color: rgb(34 197 94 / var(--tw-ring-opacity));
        }
        .focus\:ring-orange-500:focus {
            --tw-ring-opacity: 1;
            --tw-ring-color: rgb(249 115 22 / var(--tw-ring-opacity));
        }
        .focus\:ring-yellow-500:focus {
            --tw-ring-opacity: 1;
            --tw-ring-color: rgb(234 179 8 / var(--tw-ring-opacity));
        }
        .disabled\:cursor-not-allowed:disabled {
            cursor: not-allowed;
        }
        .disabled\:opacity-50:disabled {
            opacity: 0.5;
        }

        /* CSS переменные для светлой темы (по умолчанию) */
        :root {
            --bg-primary: #f0f4f8;
            --bg-pattern: rgba(160, 174, 192, 0.15);
            --bg-card: #ffffff;
            --text-primary: #1f2937;
            --text-secondary: #4b5563;
            --text-muted: #6b7280;
            --border-color: #d1d5db;
            --border-light: #e5e7eb;
            --accent-color: #2563eb;
            --accent-hover: #1d4ed8;
            --status-info-bg: #eff6ff;
            --status-info-text: #1e40af;
            --status-info-border: #bfdbfe;
            --status-success-bg: #ecfdf5;
            --status-success-text: #065f46;
            --status-success-border: #a7f3d0;
            --status-error-bg: #fef2f2;
            --status-error-text: #991b1b;
            --status-error-border: #fca5a5;
            --input-bg: #ffffff;
            --input-border: #d1d5db;
            --drag-area-bg: transparent;
            --drag-area-border: #94a3b8;
            --drag-area-active-bg: #f0f9ff;
            --drag-area-active-border: #0ea5e9;
            --code-bg: #f3f4f6;
            --details-bg: #f9fafb;
        }

        /* Темная тема */
        @media (prefers-color-scheme: dark) {
            :root {
                --bg-primary: #0f172a;
                --bg-pattern: rgba(30, 41, 59, 0.4);
                --bg-card: #1e293b;
                --text-primary: #f1f5f9;
                --text-secondary: #cbd5e1;
                --text-muted: #94a3b8;
                --border-color: #374151;
                --border-light: #374151;
                --accent-color: #3b82f6;
                --accent-hover: #2563eb;
                --status-info-bg: #1e3a8a;
                --status-info-text: #dbeafe;
                --status-info-border: #3b82f6;
                --status-success-bg: #065f46;
                --status-success-text: #d1fae5;
                --status-success-border: #10b981;
                --status-error-bg: #7f1d1d;
                --status-error-text: #fecaca;
                --status-error-border: #ef4444;
                --input-bg: #334155;
                --input-border: #475569;
                --drag-area-bg: transparent;
                --drag-area-border: #475569;
                --drag-area-active-bg: #0c4a6e;
                --drag-area-active-border: #0ea5e9;
                --code-bg: #334155;
                --details-bg: #1e293b;
            }
            
            /* Темные варианты для кастомных классов */
            .dark\:border-gray-600 {
                --tw-border-opacity: 1;
                border-color: rgb(75 85 99 / var(--tw-border-opacity));
            }
            .dark\:border-slate-600 {
                --tw-border-opacity: 1;
                border-color: rgb(71 85 105 / var(--tw-border-opacity));
            }
            .dark\:border-slate-700 {
                --tw-border-opacity: 1;
                border-color: rgb(51 65 85 / var(--tw-border-opacity));
            }
            .dark\:border-slate-800 {
                --tw-border-opacity: 1;
                border-color: rgb(30 41 59 / var(--tw-border-opacity));
            }
            .dark\:bg-blue-900 {
                --tw-bg-opacity: 1;
                background-color: rgb(30 58 138 / var(--tw-bg-opacity));
            }
            .dark\:bg-gray-700 {
                --tw-bg-opacity: 1;
                background-color: rgb(55 65 81 / var(--tw-bg-opacity));
            }
            .dark\:bg-gray-800 {
                --tw-bg-opacity: 1;
                background-color: rgb(31 41 55 / var(--tw-bg-opacity));
            }
            .dark\:bg-slate-700 {
                --tw-bg-opacity: 1;
                background-color: rgb(51 65 85 / var(--tw-bg-opacity));
            }
            .dark\:bg-slate-800 {
                --tw-bg-opacity: 1;
                background-color: rgb(30 41 59 / var(--tw-bg-opacity));
            }
            .dark\:bg-slate-900 {
                --tw-bg-opacity: 1;
                background-color: rgb(15 23 42 / var(--tw-bg-opacity));
            }
            .dark\:bg-blue-800 {
                --tw-bg-opacity: 1;
                background-color: rgb(30 64 175 / var(--tw-bg-opacity));
            }
            .dark\:text-blue-200 {
                --tw-text-opacity: 1;
                color: rgb(191 219 254 / var(--tw-text-opacity));
            }
            .dark\:text-gray-100 {
                --tw-text-opacity: 1;
                color: rgb(243 244 246 / var(--tw-text-opacity));
            }
            .dark\:text-gray-200 {
                --tw-text-opacity: 1;
                color: rgb(229 231 235 / var(--tw-text-opacity));
            }
            .dark\:text-gray-300 {
                --tw-text-opacity: 1;
                color: rgb(209 213 219 / var(--tw-text-opacity));
            }
            .dark\:text-gray-400 {
                --tw-text-opacity: 1;
                color: rgb(156 163 175 / var(--tw-text-opacity));
            }
            .dark\:text-gray-500 {
                --tw-text-opacity: 1;
                color: rgb(107 114 128 / var(--tw-text-opacity));
            }
            .dark\:text-white {
                --tw-text-opacity: 1;
                color: rgb(255 255 255 / var(--tw-text-opacity));
            }
            .dark\:text-blue-400 {
                --tw-text-opacity: 1;
                color: rgb(96 165 250 / var(--tw-text-opacity));
            }
            .dark\:hover\:bg-blue-800:hover {
                --tw-bg-opacity: 1;
                background-color: rgb(30 64 175 / var(--tw-bg-opacity));
            }
            .dark\:hover\:text-blue-400:hover {
                --tw-text-opacity: 1;
                color: rgb(96 165 250 / var(--tw-text-opacity));
            }
            .dark\:focus\:ring-blue-400:focus {
                --tw-ring-opacity: 1;
                --tw-ring-color: rgb(96 165 250 / var(--tw-ring-opacity));
            }
            .dark\:from-blue-700 {
                --tw-gradient-from: #1d4ed8 var(--tw-gradient-from-position);
                --tw-gradient-to: rgb(29 78 216 / 0) var(--tw-gradient-to-position);
                --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);
            }
            .dark\:to-blue-800 {
                --tw-gradient-to: #1e40af var(--tw-gradient-to-position);
            }
            .dark\:hover\:from-blue-800:hover {
                --tw-gradient-from: #1e40af var(--tw-gradient-from-position);
                --tw-gradient-to: rgb(30 64 175 / 0) var(--tw-gradient-to-position);
                --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);
            }
            .dark\:hover\:to-blue-900:hover {
                --tw-gradient-to: #1e3a8a var(--tw-gradient-to-position);
            }
            .dark\:file\:bg-blue-900::file-selector-button {
                --tw-bg-opacity: 1;
                background-color: rgb(30 58 138 / var(--tw-bg-opacity));
            }
            .dark\:file\:text-blue-200::file-selector-button {
                --tw-text-opacity: 1;
                color: rgb(191 219 254 / var(--tw-text-opacity));
            }
            .dark\:hover\:file\:bg-blue-800::file-selector-button:hover {
                --tw-bg-opacity: 1;
                background-color: rgb(30 64 175 / var(--tw-bg-opacity));
            }
        }

        /* Применение CSS переменных */
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-primary);
            min-height: 100vh;
            /* Сеточный паттерн, как на миллиметровке */
            background-image: linear-gradient(0deg, transparent 14px, var(--bg-pattern) 15px),
                              linear-gradient(90deg, transparent 14px, var(--bg-pattern) 15px);
            background-size: 15px 15px; 
            background-attachment: fixed;
            color: var(--text-primary);
        }
        
        /* Главная карточка */
        .main-card {
            background-color: var(--bg-card);
            /* Синяя окантовка сверху */
            border-top: 5px solid var(--accent-color);
        }

        /* Стиль для сообщения о статусе по умолчанию (info) */
        .status-info {
            background-color: var(--status-info-bg);
            color: var(--status-info-text);
            border-color: var(--status-info-border);
        }
        .status-success {
            background-color: var(--status-success-bg);
            color: var(--status-success-text);
            border-color: var(--status-success-border);
        }
        .status-error {
            background-color: var(--status-error-bg);
            color: var(--status-error-text);
            border-color: var(--status-error-border);
        }

        /* Добавленные стили для Drag/Drop и Input Focus сохранены */
        .drag-area {
            border: 3px dashed var(--drag-area-border);
            transition: all 0.3s ease;
        }
        .drag-area.active {
            border-color: var(--drag-area-active-border);
            background-color: var(--drag-area-active-bg);
            box-shadow: 0 0 0 4px rgba(14, 165, 233, 0.2); /* ring effect for focus */
        }
        
        details[open] summary svg {
            transform: rotate(180deg);
        }
        
        @keyframes progress-stripes {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .animate-progress-stripes {
            width: 200%; 
            animation: progress-stripes 2s linear infinite;
            background: linear-gradient(
                135deg,
                rgba(255, 255, 255, 0.15) 25%,
                transparent 25%,
                transparent 50%,
                rgba(255, 255, 255, 0.15) 50%,
                rgba(255, 255, 255, 0.15) 75%,
                transparent 75%,
                transparent
            );
            background-size: 1rem 1rem;
            will-change: transform;
        }
        
        .snils-input:focus, .mpi-input:focus {
             outline: none;
             border-color: #f97316; /* orange-500 */
             box-shadow: 0 0 0 1px #f97316;
        }

        /* Стили для элементов формы в темной теме */
        input[type="file"] {
            background-color: var(--input-bg);
            border-color: var(--input-border);
            color: var(--text-primary);
        }

        select, input[type="text"] {
            background-color: var(--input-bg);
            border-color: var(--input-border);
            color: var(--text-primary);
        }

        /* Стили для кода и примеров */
        code {
            background-color: var(--code-bg);
            color: var(--text-primary);
        }

        pre {
            background-color: var(--code-bg);
            color: var(--text-primary);
        }

        /* Стили для details */
        details {
            background-color: var(--details-bg);
            border-color: var(--border-light);
        }

        /* Медиа-запросы для отзывчивости */
        @media (min-width: 768px) {
            .md\:grid-cols-2 {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <!-- Применяем main-card и улучшенную тень -->
    <div id="app-container" class="main-card p-8 rounded-xl shadow-2xl w-full max-w-2xl transition duration-300">
        
        <!-- Контейнер для двух ссылок: flex justify-between обеспечивает расположение слева и справа -->
        <div class="mb-4 -mt-2 flex justify-between items-center"> 
            
            <!-- 1. Навигационная ссылка (слева) -->
            <a href="/index.html" class="text-sm text-gray-500 hover:text-blue-600 transition duration-150 flex items-center font-medium dark:text-gray-400 dark:hover:text-blue-400">
                <!-- Иконка стрелки влево для навигации -->
                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                Назад на главную
            </a>
            
            <!-- 2. Ссылка для скачивания примера (справа, миниатюрная) -->
            <a href="/ARSHIN example.json" download="ARSHIN example.json" 
               class="text-xs text-gray-500 hover:text-blue-600 transition duration-150 
                      flex items-center dark:text-gray-400 dark:hover:text-blue-400">
                <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                Скачать пример JSON
            </a>
        </div>

        <h1 class="text-3xl font-extrabold text-gray-800 mb-6 text-center border-b border-gray-200 pb-4 dark:text-gray-100 dark:border-gray-600">
            Конвертер ГРСИ/МПИ (CSV &rarr; JSON)
        </h1>

        <!-- Область загрузки файла с улучшенным дизайном -->
        <div class="mb-6">
            <label for="csvFile" class="block text-lg font-medium text-gray-700 mb-2 dark:text-gray-300">
                Выберите CSV-файл (разделитель: точка с запятой)
            </label>
            <div class="relative">
                <input type="file" id="csvFile" accept=".csv" class="w-full text-sm text-gray-500 dark:text-gray-300
                    file:mr-4 file:py-3 file:px-6
                    file:rounded-xl file:border-0
                    file:text-base file:font-bold
                    file:bg-blue-100 file:text-blue-800
                    hover:file:bg-blue-200 cursor-pointer transition duration-150
                    dark:file:bg-blue-900 dark:file:text-blue-200 dark:hover:file:bg-blue-800">
                <div id="fileNameDisplay" class="mt-2 text-sm text-gray-600 dark:text-gray-400 hidden">
                    <span class="font-medium">Выбран файл:</span> <span id="fileName"></span>
                </div>
            </div>
        </div>

        <!-- Дополнительные настройки -->
        <div class="mb-6 bg-gray-50 p-4 rounded-xl dark:bg-gray-800">
            <h3 class="text-lg font-medium text-gray-700 mb-3 dark:text-gray-300">Настройки конвертации</h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="flex items-center space-x-2">
                        <input type="checkbox" id="skipFirstRow" checked class="rounded text-blue-600 focus:ring-blue-500 dark:focus:ring-blue-400">
                        <span class="text-gray-700 dark:text-gray-300">Пропустить первую строку (заголовок)</span>
                    </label>
                </div>
                
                <div>
                    <label class="flex items-center space-x-2">
                        <input type="checkbox" id="prettyPrint" checked class="rounded text-blue-600 focus:ring-blue-500 dark:focus:ring-blue-400">
                        <span class="text-gray-700 dark:text-gray-300">Форматированный JSON</span>
                    </label>
                </div>
            </div>
            
            <div class="mt-3">
                <label for="delimiter" class="block text-sm font-medium text-gray-700 mb-1 dark:text-gray-300">Разделитель</label>
                <select id="delimiter" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300">
                    <option value=";" selected>Точка с запятой (;)</option>
                    <option value=",">Запятая (,)</option>
                    <option value="\t">Табуляция</option>
                </select>
            </div>
        </div>

        <!-- Кнопка конвертации -->
        <button id="convertButton" onclick="convertAndDownload()" disabled
                class="w-full px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-bold text-lg rounded-xl shadow-lg
                       hover:from-blue-700 hover:to-blue-800 disabled:opacity-50 disabled:cursor-not-allowed
                       transition duration-200 ease-in-out transform hover:scale-[1.01]
                       focus:outline-none focus:ring-4 focus:ring-blue-500/50 flex items-center justify-center
                       dark:from-blue-700 dark:to-blue-800 dark:hover:from-blue-800 dark:hover:to-blue-900">
            <svg id="convertSpinner" class="hidden w-5 h-5 mr-2 animate-spin" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            <span id="convertText">Конвертировать и Скачать JSON</span>
        </button>

        <!-- Сообщения о статусе -->
        <div id="statusMessage" class="mt-6 p-4 rounded-xl text-base transition duration-300 min-h-[50px] border status-info hidden">
            <!-- Здесь будут отображаться сообщения о ходе работы или ошибки -->
        </div>

        <!-- Пояснение формата с аккордеоном -->
        <div class="mt-8 border-t pt-4 border-gray-300 dark:border-gray-600">
            <details class="group">
                <summary class="flex justify-between items-center font-medium text-gray-700 cursor-pointer list-none dark:text-gray-300">
                    <span>Ожидаемый формат данных</span>
                    <svg class="w-5 h-5 text-gray-500 transition-transform duration-300 group-open:rotate-180 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </summary>
                <div class="mt-3 text-sm text-gray-600 dark:text-gray-400 space-y-2">
                    <p><span class="font-semibold text-gray-800 dark:text-gray-200">Ожидаемый формат CSV:</span> 
                    (Пропускается 1-я строка). Со 2-й строки: <code class="bg-gray-100 px-1 py-0.5 rounded dark:bg-gray-700">ГРСИ;МПИ (месяцы)</code>.</p>
                    
                    <div class="bg-gray-50 p-3 rounded-lg mt-2 dark:bg-gray-800">
                        <p class="font-medium text-gray-700 mb-1 dark:text-gray-300">Пример содержимого CSV:</p>
                        <pre class="text-xs bg-gray-100 p-2 rounded overflow-x-auto dark:bg-gray-700 dark:text-gray-300">ГРСИ;МПИ
54634-13;12
12345-67;24
67890-12;6</pre>
                    </div>
                    
                    <p class="mt-2"><span class="font-semibold text-gray-800 dark:text-gray-200">Формат JSON:</span> 
                    Объект <code class="bg-gray-100 px-1 py-0.5 rounded dark:bg-gray-700">{"54634-13": 12, "12345-67": 24, "67890-12": 6}</code></p>
                </div>
            </details>
        </div>
    </div>

    <script>
        // Глобальные константы и переменные
        const FILE_INPUT = document.getElementById('csvFile');
        const STATUS_MESSAGE = document.getElementById('statusMessage');
        const CONVERT_BUTTON = document.getElementById('convertButton');
        const CONVERT_TEXT = document.getElementById('convertText');
        const CONVERT_SPINNER = document.getElementById('convertSpinner');
        const FILE_NAME_DISPLAY = document.getElementById('fileNameDisplay');
        const FILE_NAME = document.getElementById('fileName');

        /**
         * Обрабатывает выбор файла
         */
        function handleFileSelection() {
            const file = FILE_INPUT.files[0];
            if (file) {
                CONVERT_BUTTON.disabled = false;
                FILE_NAME.textContent = file.name;
                FILE_NAME_DISPLAY.classList.remove('hidden');
                setStatus('', 'info');
            } else {
                CONVERT_BUTTON.disabled = true;
                FILE_NAME_DISPLAY.classList.add('hidden');
            }
        }

        /**
         * Устанавливает сообщение о статусе
         * @param {string} message - Текст сообщения
         * @param {string} type - Тип: 'info' (по умолчанию), 'success', 'error'
         */
        function setStatus(message, type = 'info') {
            if (!message) {
                STATUS_MESSAGE.classList.add('hidden');
                return;
            }
            
            STATUS_MESSAGE.textContent = message;
            // Сброс всех классов статуса и установка базовых
            STATUS_MESSAGE.className = 'mt-6 p-4 rounded-xl text-base transition duration-300 min-h-[50px] border'; 
            STATUS_MESSAGE.classList.remove('hidden');

            switch (type) {
                case 'success':
                    STATUS_MESSAGE.classList.add('status-success');
                    break;
                case 'error':
                    STATUS_MESSAGE.classList.add('status-error');
                    break;
                case 'info':
                default:
                    STATUS_MESSAGE.classList.add('status-info');
                    break;
            }
        }

        /**
         * Показывает/скрывает индикатор загрузки на кнопке
         * @param {boolean} show - Показать индикатор
         */
        function toggleLoading(show) {
            if (show) {
                CONVERT_SPINNER.classList.remove('hidden');
                CONVERT_TEXT.textContent = 'Конвертация...';
                CONVERT_BUTTON.disabled = true;
            } else {
                CONVERT_SPINNER.classList.add('hidden');
                CONVERT_TEXT.textContent = 'Конвертировать и Скачать JSON';
                CONVERT_BUTTON.disabled = !FILE_INPUT.files.length;
            }
        }

        /**
         * Основная функция: читает файл, конвертирует и предлагает скачать
         */
        function convertAndDownload() {
            const file = FILE_INPUT.files[0];
            if (!file) {
                setStatus('Ошибка: Файл не выбран.', 'error');
                return;
            }

            setStatus('Чтение файла...', 'info');
            toggleLoading(true);

            const reader = new FileReader();

            reader.onload = (event) => {
                try {
                    const csvText = event.target.result;
                    const skipFirstRow = document.getElementById('skipFirstRow').checked;
                    const delimiter = document.getElementById('delimiter').value;
                    const prettyPrint = document.getElementById('prettyPrint').checked;
                    
                    const jsonObject = parseCSV(csvText, skipFirstRow, delimiter);
                    
                    if (Object.keys(jsonObject).length === 0) {
                         setStatus('Конвертация завершена, но не найдено ни одной корректной записи для создания JSON. Проверьте формат данных.', 'error');
                         toggleLoading(false);
                         return;
                    }

                    downloadJSON(jsonObject, file.name, prettyPrint);
                    setStatus(`Успех! JSON файл создан и готов к скачиванию. Конвертировано ${Object.keys(jsonObject).length} записей.`, 'success');
                    toggleLoading(false);

                } catch (e) {
                    console.error("Ошибка при обработке файла:", e);
                    setStatus(`Критическая ошибка при обработке: ${e.message}`, 'error');
                    toggleLoading(false);
                }
            };

            reader.onerror = () => {
                setStatus('Ошибка при чтении файла.', 'error');
                toggleLoading(false);
            };

            // Читаем файл как текст
            reader.readAsText(file, 'UTF-8');
        }

        /**
         * Парсит CSV-текст в JSON-объект
         * @param {string} csvText - Содержимое CSV файла
         * @param {boolean} skipFirstRow - Пропустить первую строку
         * @param {string} delimiter - Разделитель
         * @returns {Object} - JSON объект в формате {ГРСИ: МПИ}
         */
        function parseCSV(csvText, skipFirstRow = true, delimiter = ';') {
            // Разделение на строки и удаление лишних пробелов/пустых строк
            const lines = csvText.split(/\r\n|\n/)
                .map(line => line.trim())
                .filter(line => line.length > 0);

            if (lines.length < (skipFirstRow ? 2 : 1)) {
                throw new Error(`Файл должен содержать хотя бы ${skipFirstRow ? '2' : '1'} строк${skipFirstRow ? 'и' : 'у'} (${skipFirstRow ? 'заголовок + одна запись' : 'одна запись'}).`);
            }

            // Пропускаем первую строку если нужно
            const dataLines = skipFirstRow ? lines.slice(1) : lines;
            const jsonResult = {};
            let errors = 0;
            let processed = 0;

            dataLines.forEach((line, index) => {
                // Разделение по выбранному разделителю
                const parts = line.split(delimiter);

                if (parts.length !== 2) {
                    console.warn(`[Строка ${index + (skipFirstRow ? 2 : 1)}] Пропущена: ожидалось 2 столбца, найдено ${parts.length}.`);
                    errors++;
                    return;
                }

                const grsi = parts[0].trim();
                const mpiString = parts[1].trim();
                const mpi = parseInt(mpiString, 10);

                // Регулярное выражение для проверки формата ГРСИ (например, 54634-13)
                // Проверяем: 1+ цифр, дефис, 2 цифры
                const grsiPattern = /^\d+-\d{2}$/;

                if (!grsiPattern.test(grsi)) {
                    console.warn(`[Строка ${index + (skipFirstRow ? 2 : 1)}] Пропущена: некорректный формат ГРСИ ('${grsi}').`);
                    errors++;
                    return;
                }
                
                if (isNaN(mpi) || mpi < 0) { // Также проверяем, что МПИ не отрицательный
                    console.warn(`[Строка ${index + (skipFirstRow ? 2 : 1)}] Пропущена: МПИ ('${mpiString}') не является корректным положительным числом.`);
                    errors++;
                    return;
                }

                // Добавление в результирующий объект
                jsonResult[grsi] = mpi;
                processed++;
            });

            if (errors > 0) {
                 console.warn(`Конвертация завершена с ${errors} ошибками/пропусками.`);
            }
            
            if (processed === 0) {
                console.warn('Не обработано ни одной строки. Проверьте формат файла и настройки.');
            }

            return jsonResult;
        }

        /**
         * Создает и инициирует скачивание JSON файла
         * @param {Object} jsonObject - JSON объект для скачивания
         * @param {string} originalFileName - Исходное имя файла для генерации имени JSON
         * @param {boolean} prettyPrint - Форматировать JSON
         */
        function downloadJSON(jsonObject, originalFileName, prettyPrint = true) {
            const jsonString = prettyPrint ? JSON.stringify(jsonObject, null, 2) : JSON.stringify(jsonObject);
            const blob = new Blob([jsonString], { type: 'application/json' });

            // Заменяем расширение .csv на _converted.json или просто добавляем .json
            const newFileName = originalFileName.replace(/\.csv$/i, '') + '_converted.json';

            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = newFileName;
            
            // Имитация клика для скачивания
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);

            // Освобождение URL
            URL.revokeObjectURL(url);
        }

        // Добавляем обработчик события выбора файла
        FILE_INPUT.addEventListener('change', handleFileSelection);
    </script>

</body>
</html>
